angular.module("ng-currency",[]).directive("ngCurrency",function(b,a){return{require:"ngModel",scope:{min:"=min",max:"=max",ngRequired:"=ngRequired"},link:function(k,g,j,f){function e(l){return RegExp("\\d|\\"+l,"g")}function d(l){return RegExp("((\\"+l+")|([0-9]{1,}\\"+l+"?))&?[0-9]{0,2}","g")}function c(l){return RegExp("\\"+l,"g")}function h(n){n=String(n);var m=a.NUMBER_FORMATS.DECIMAL_SEP;var l=null;if(n.match(c(m))){l=n.match(e(m)).join("").match(d(m));l=l?l[0].replace(m,"."):null}else{if(n.match(c("."))){l=n.match(e(".")).join("").match(d("."));l=l?l[0]:null}else{l=n.match(/\d/g);l=l?l.join(""):null}}return l}f.$parsers.push(function(l){cVal=h(l);return parseFloat(cVal)});g.on("blur",function(){g.val(b("currency")(f.$modelValue))});f.$formatters.unshift(function(l){return b("currency")(l)});k.$watch(function(){return f.$modelValue},function(m,l){i(m)});function i(n){if(!k.ngRequired&&isNaN(n)){return}if(k.min){var m=parseFloat(k.min);f.$setValidity("min",n>=m)}if(k.max){var l=parseFloat(k.max);f.$setValidity("max",n<=l)}}}}});